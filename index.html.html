<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pong Simples</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #000000, #0a0a2a, #000000);
            padding: 20px;
            overflow: hidden;
        }
        
        /* Menu Principal */
        .menu-container {
            background: linear-gradient(135deg, #0a0a2a, #000000);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.8);
            padding: 40px;
            max-width: 500px;
            width: 100%;
            text-align: center;
            border: 1px solid #1a1a5e;
        }
        
        .menu-title {
            color: #e6f7ff;
            margin-bottom: 30px;
            font-size: 2.5rem;
            text-shadow: 0 2px 10px rgba(74, 144, 226, 0.5);
        }
        
        .menu-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .menu-btn {
            padding: 15px 25px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(135deg, #1a1a5e, #000033);
            color: #e6f7ff;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid #2d2d99;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
        }
        
        .menu-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(74, 144, 226, 0.3);
            background: linear-gradient(135deg, #2d2d99, #1a1a5e);
        }
        
        .menu-instructions {
            background: rgba(10, 10, 42, 0.8);
            padding: 15px;
            border-radius: 10px;
            text-align: left;
            font-size: 0.9rem;
            color: #b3e0ff;
            border: 1px solid #1a1a5e;
        }
        
        /* Container do Jogo (inicialmente escondido) */
        .game-container {
            display: none;
            position: relative;
            width: 100%;
            max-width: 800px;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: #e6f7ff;
            font-size: 1.2rem;
            font-weight: bold;
            text-shadow: 0 2px 5px rgba(74, 144, 226, 0.5);
        }
        
        canvas {
            display: block;
            margin: 0 auto;
            background: #000000;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.8);
            border: 2px solid #1a1a5e;
        }
        
        .simple-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }
        
        .simple-controls button {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            background: rgba(26, 26, 94, 0.8);
            color: #e6f7ff;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid #2d2d99;
        }
        
        .simple-controls button:hover {
            background: rgba(45, 45, 153, 0.9);
        }
        
        .game-over {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #0a0a2a, #000000);
            color: #e6f7ff;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 0 40px rgba(74, 144, 226, 0.3);
            z-index: 10;
            border: 2px solid #2d2d99;
        }
        
        .game-over h2 {
            font-size: 2rem;
            margin-bottom: 15px;
            color: #ff6b6b;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        }
        
        .game-over button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background: #1a1a5e;
            color: #e6f7ff;
            font-size: 1rem;
            cursor: pointer;
            margin: 5px;
            border: 1px solid #2d2d99;
            transition: all 0.2s ease;
        }
        
        .game-over button:hover {
            background: #2d2d99;
        }
        
        .back-btn {
            position: absolute;
            top: 15px;
            left: 15px;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            background: rgba(26, 26, 94, 0.8);
            color: #e6f7ff;
            cursor: pointer;
            z-index: 5;
            border: 1px solid #2d2d99;
            transition: all 0.2s ease;
        }
        
        .back-btn:hover {
            background: rgba(45, 45, 153, 0.9);
        }

        .countdown {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4rem;
            color: #4a90e2;
            font-weight: bold;
            text-shadow: 0 0 20px rgba(74, 144, 226, 0.7);
            z-index: 5;
            display: none;
        }

        /* Efeito de part√≠culas no fundo */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.4;
        }

        /* Efeito de brilho nas bordas */
        .glow-effect {
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 12px;
            background: linear-gradient(45deg, #4a90e2, #2d2d99, #4a90e2);
            z-index: -1;
            opacity: 0.3;
            filter: blur(5px);
        }
    </style>
</head>
<body>
    <!-- Efeito de part√≠culas no fundo -->
    <canvas class="particles" id="particles"></canvas>
    
    <!-- Menu Principal -->
    <div class="menu-container" id="menu-container">
        <div class="glow-effect"></div>
        <h1 class="menu-title">üèì Pong</h1>
        
        <div class="menu-options">
            <button class="menu-btn" id="two-players-btn">2 Jogadores</button>
            <button class="menu-btn" id="vs-ai-btn">Contra IA</button>
        </div>
        
        <div class="menu-instructions">
            <p><strong>Controles:</strong></p>
            <p>‚Ä¢ <strong>Jogador 1:</strong> Teclas W (cima) e S (baixo)</p>
            <p>‚Ä¢ <strong>Jogador 2:</strong> Setas ‚Üë (cima) e ‚Üì (baixo)</p>
            <p>‚Ä¢ <strong>Pausar:</strong> Tecla P</p>
            <p>‚Ä¢ Primeiro a fazer 5 pontos vence!</p>
        </div>
    </div>
    
    <!-- Container do Jogo -->
    <div class="game-container" id="game-container">
        <button class="back-btn" id="back-btn">‚Üê Voltar</button>
        
        <div class="game-header">
            <div class="player1">Jogador 1: <span id="player1-score">0</span></div>
            <div class="vs">VS</div>
            <div class="player2">Jogador 2: <span id="player2-score">0</span></div>
        </div>
        
        <canvas id="pongCanvas" width="800" height="450"></canvas>
        <div class="countdown" id="countdown"></div>
        
        <div class="simple-controls">
            <button id="pause-btn">Pausar (P)</button>
            <button id="reset-btn">Reiniciar</button>
        </div>
        
        <div class="game-over" id="game-over">
            <div class="glow-effect"></div>
            <h2>Fim de Jogo!</h2>
            <p>Vencedor: <span id="winner">Jogador 1</span></p>
            <p>Placar: <span id="final-score">0</span> - <span id="final-score2">0</span></p>
            <button id="restart-btn">Jogar Novamente</button>
            <button id="menu-btn">Voltar ao Menu</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Efeito de part√≠culas no fundo
            const particlesCanvas = document.getElementById('particles');
            const particlesCtx = particlesCanvas.getContext('2d');
            
            function initParticles() {
                particlesCanvas.width = window.innerWidth;
                particlesCanvas.height = window.innerHeight;
                
                const particles = [];
                const particleCount = 60;
                
                for (let i = 0; i < particleCount; i++) {
                    particles.push({
                        x: Math.random() * particlesCanvas.width,
                        y: Math.random() * particlesCanvas.height,
                        size: Math.random() * 1.5 + 0.5,
                        speed: Math.random() * 0.8 + 0.3,
                        color: `rgba(74, 144, 226, ${Math.random() * 0.4 + 0.1})`
                    });
                }
                
                function animateParticles() {
                    particlesCtx.fillStyle = 'rgba(0, 0, 0, 0.1)';
                    particlesCtx.fillRect(0, 0, particlesCanvas.width, particlesCanvas.height);
                    
                    particles.forEach(particle => {
                        particle.y += particle.speed;
                        if (particle.y > particlesCanvas.height) {
                            particle.y = 0;
                            particle.x = Math.random() * particlesCanvas.width;
                        }
                        
                        particlesCtx.beginPath();
                        particlesCtx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                        particlesCtx.fillStyle = particle.color;
                        particlesCtx.fill();
                    });
                    
                    requestAnimationFrame(animateParticles);
                }
                
                animateParticles();
            }
            
            // Elementos do DOM
            const menuContainer = document.getElementById('menu-container');
            const gameContainer = document.getElementById('game-container');
            const twoPlayersBtn = document.getElementById('two-players-btn');
            const vsAiBtn = document.getElementById('vs-ai-btn');
            const backBtn = document.getElementById('back-btn');
            const pauseBtn = document.getElementById('pause-btn');
            const resetBtn = document.getElementById('reset-btn');
            const restartBtn = document.getElementById('restart-btn');
            const menuBtn = document.getElementById('menu-btn');
            const countdownElement = document.getElementById('countdown');
            
            const canvas = document.getElementById('pongCanvas');
            const ctx = canvas.getContext('2d');
            const player1ScoreElement = document.getElementById('player1-score');
            const player2ScoreElement = document.getElementById('player2-score');
            const gameOver = document.getElementById('game-over');
            const winnerElement = document.getElementById('winner');
            const finalScoreElement = document.getElementById('final-score');
            const finalScore2Element = document.getElementById('final-score2');
            
            // Configura√ß√µes do jogo
            const paddleWidth = 12;
            const paddleHeight = 80;
            const ballSize = 10;
            const winningScore = 5;
            
            // Estado do jogo
            let player1Score = 0;
            let player2Score = 0;
            let gameRunning = false;
            let gamePaused = false;
            let animationId;
            let gameMode = 'two-players'; // 'two-players' ou 'vs-ai'
            let waitingForRoundStart = false;
            
            // Velocidades constantes
            const PADDLE_SPEED = 6;
            const BALL_BASE_SPEED = 3.5;
            const BALL_MAX_SPEED = 6;
            let ballSpeedMultiplier = 1;
            
            // Posi√ß√µes iniciais
            let player1Y = canvas.height / 2 - paddleHeight / 2;
            let player2Y = canvas.height / 2 - paddleHeight / 2;
            let ballX = canvas.width / 2;
            let ballY = canvas.height / 2;
            let ballSpeedX = 0;
            let ballSpeedY = 0;
            
            // Controles
            const keys = {
                w: false,
                s: false,
                ArrowUp: false,
                ArrowDown: false
            };
            
            // Inicializar o jogo
            function initGame() {
                initParticles();
                
                // Event listeners do menu
                twoPlayersBtn.addEventListener('click', () => {
                    showGame();
                    gameMode = 'two-players';
                    startGame();
                });
                
                vsAiBtn.addEventListener('click', () => {
                    showGame();
                    gameMode = 'vs-ai';
                    startGame();
                });
                
                backBtn.addEventListener('click', showMenu);
                menuBtn.addEventListener('click', showMenu);
                
                // Event listeners do jogo
                document.addEventListener('keydown', (e) => {
                    if (e.key in keys) {
                        keys[e.key] = true;
                    }
                    // Pausar com a tecla P
                    if (e.key === 'p' || e.key === 'P') {
                        togglePause();
                    }
                });
                
                document.addEventListener('keyup', (e) => {
                    if (e.key in keys) {
                        keys[e.key] = false;
                    }
                });
                
                pauseBtn.addEventListener('click', togglePause);
                resetBtn.addEventListener('click', resetGame);
                restartBtn.addEventListener('click', restartGame);
                
                // Desenhar estado inicial
                draw();
            }
            
            // Mostrar menu
            function showMenu() {
                menuContainer.style.display = 'block';
                gameContainer.style.display = 'none';
                resetGame();
            }
            
            // Mostrar jogo
            function showGame() {
                menuContainer.style.display = 'none';
                gameContainer.style.display = 'block';
            }
            
            // Desenhar elementos
            function draw() {
                // Limpar canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Fundo preto
                ctx.fillStyle = '#000000';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Linha central
                ctx.setLineDash([5, 10]);
                ctx.beginPath();
                ctx.moveTo(canvas.width / 2, 0);
                ctx.lineTo(canvas.width / 2, canvas.height);
                ctx.strokeStyle = 'rgba(74, 144, 226, 0.3)';
                ctx.lineWidth = 2;
                ctx.stroke();
                ctx.setLineDash([]);
                
                // Raquetes
                ctx.fillStyle = '#4a90e2';
                ctx.fillRect(0, player1Y, paddleWidth, paddleHeight);
                
                ctx.fillStyle = '#ff6b6b';
                ctx.fillRect(canvas.width - paddleWidth, player2Y, paddleWidth, paddleHeight);
                
                // Bola
                ctx.fillStyle = '#ffffff';
                ctx.beginPath();
                ctx.arc(ballX, ballY, ballSize, 0, Math.PI * 2);
                ctx.fill();
                
                // Efeito de brilho na bola
                const glow = ctx.createRadialGradient(ballX, ballY, 0, ballX, ballY, ballSize * 1.5);
                glow.addColorStop(0, 'rgba(74, 144, 226, 0.6)');
                glow.addColorStop(1, 'transparent');
                ctx.fillStyle = glow;
                ctx.beginPath();
                ctx.arc(ballX, ballY, ballSize * 1.5, 0, Math.PI * 2);
                ctx.fill();
                
                // Placar
                ctx.font = 'bold 40px Arial';
                ctx.fillStyle = '#4a90e2';
                ctx.textAlign = 'center';
                ctx.fillText(player1Score.toString(), canvas.width / 4, 50);
                ctx.fillText(player2Score.toString(), 3 * canvas.width / 4, 50);
                
                // Sombra do placar
                ctx.strokeStyle = 'rgba(0, 0, 0, 0.5)';
                ctx.lineWidth = 3;
                ctx.strokeText(player1Score.toString(), canvas.width / 4, 50);
                ctx.strokeText(player2Score.toString(), 3 * canvas.width / 4, 50);
            }
            
            // Atualizar jogo
            function update() {
                if (gamePaused || !gameRunning || waitingForRoundStart) return;
                
                // Mover raquetes com velocidade constante
                // Jogador 1
                if (keys.w && player1Y > 0) {
                    player1Y -= PADDLE_SPEED;
                }
                if (keys.s && player1Y < canvas.height - paddleHeight) {
                    player1Y += PADDLE_SPEED;
                }
                
                // Jogador 2 (humano ou IA)
                if (gameMode === 'two-players') {
                    if (keys.ArrowUp && player2Y > 0) {
                        player2Y -= PADDLE_SPEED;
                    }
                    if (keys.ArrowDown && player2Y < canvas.height - paddleHeight) {
                        player2Y += PADDLE_SPEED;
                    }
                } else {
                    // IA melhorada
                    moveAI();
                }
                
                // Mover bola
                ballX += ballSpeedX * ballSpeedMultiplier;
                ballY += ballSpeedY * ballSpeedMultiplier;
                
                // Colis√£o com paredes superior/inferior
                if (ballY - ballSize < 0) {
                    ballY = ballSize;
                    ballSpeedY = Math.abs(ballSpeedY);
                } else if (ballY + ballSize > canvas.height) {
                    ballY = canvas.height - ballSize;
                    ballSpeedY = -Math.abs(ballSpeedY);
                }
                
                // Colis√£o com raquete do jogador 1
                if (ballX - ballSize < paddleWidth && 
                    ballY + ballSize > player1Y && 
                    ballY - ballSize < player1Y + paddleHeight) {
                    
                    // Corrigir posi√ß√£o
                    ballX = paddleWidth + ballSize;
                    
                    // Calcular √¢ngulo baseado na posi√ß√£o de contato
                    const hitPos = (ballY - player1Y) / paddleHeight;
                    const angle = (hitPos - 0.5) * Math.PI / 1.5; // √Çngulo limitado
                    
                    // Velocidade base com pequeno aumento
                    const baseSpeed = BALL_BASE_SPEED;
                    ballSpeedMultiplier = Math.min(ballSpeedMultiplier * 1.05, BALL_MAX_SPEED / baseSpeed);
                    
                    ballSpeedX = Math.cos(angle) * baseSpeed;
                    ballSpeedY = Math.sin(angle) * baseSpeed;
                    
                    // Garantir dire√ß√£o para a direita
                    ballSpeedX = Math.abs(ballSpeedX);
                }
                
                // Colis√£o com raquete do jogador 2
                if (ballX + ballSize > canvas.width - paddleWidth && 
                    ballY + ballSize > player2Y && 
                    ballY - ballSize < player2Y + paddleHeight) {
                    
                    // Corrigir posi√ß√£o
                    ballX = canvas.width - paddleWidth - ballSize;
                    
                    // Calcular √¢ngulo baseado na posi√ß√£o de contato
                    const hitPos = (ballY - player2Y) / paddleHeight;
                    const angle = (hitPos - 0.5) * Math.PI / 1.5; // √Çngulo limitado
                    
                    // Velocidade base com pequeno aumento
                    const baseSpeed = BALL_BASE_SPEED;
                    ballSpeedMultiplier = Math.min(ballSpeedMultiplier * 1.05, BALL_MAX_SPEED / baseSpeed);
                    
                    ballSpeedX = Math.cos(angle) * baseSpeed;
                    ballSpeedY = Math.sin(angle) * baseSpeed;
                    
                    // Garantir dire√ß√£o para a esquerda
                    ballSpeedX = -Math.abs(ballSpeedX);
                }
                
                // Verificar se saiu da tela
                if (ballX < 0) {
                    player2Score++;
                    player2ScoreElement.textContent = player2Score;
                    startNewRound();
                    checkGameOver();
                } else if (ballX > canvas.width) {
                    player1Score++;
                    player1ScoreElement.textContent = player1Score;
                    startNewRound();
                    checkGameOver();
                }
            }
            
            // Movimento da IA
            function moveAI() {
                const paddleCenter = player2Y + paddleHeight / 2;
                const targetY = ballY - paddleHeight / 2;
                
                // Suavizar o movimento da IA
                const diff = targetY - player2Y;
                const movement = Math.sign(diff) * Math.min(Math.abs(diff), PADDLE_SPEED);
                
                // Aplicar movimento com limites
                const newPosition = player2Y + movement;
                if (newPosition >= 0 && newPosition <= canvas.height - paddleHeight) {
                    player2Y = newPosition;
                }
            }
            
            // Iniciar novo round com countdown
            function startNewRound() {
                waitingForRoundStart = true;
                ballSpeedMultiplier = 1;
                
                // Resetar posi√ß√µes
                player1Y = canvas.height / 2 - paddleHeight / 2;
                player2Y = canvas.height / 2 - paddleHeight / 2;
                ballX = canvas.width / 2;
                ballY = canvas.height / 2;
                ballSpeedX = 0;
                ballSpeedY = 0;
                
                // Countdown
                let count = 3;
                countdownElement.style.display = 'block';
                countdownElement.textContent = count;
                
                const countdownInterval = setInterval(() => {
                    count--;
                    if (count > 0) {
                        countdownElement.textContent = count;
                    } else {
                        countdownElement.textContent = 'GO!';
                        setTimeout(() => {
                            countdownElement.style.display = 'none';
                            waitingForRoundStart = false;
                            
                            // Iniciar bola em dire√ß√£o aleat√≥ria
                            const direction = Math.random() > 0.5 ? 1 : -1;
                            const angle = (Math.random() * Math.PI / 3) - Math.PI / 6; // √Çngulo entre -30¬∞ e 30¬∞
                            
                            ballSpeedX = Math.cos(angle) * BALL_BASE_SPEED * direction;
                            ballSpeedY = Math.sin(angle) * BALL_BASE_SPEED;
                            
                            clearInterval(countdownInterval);
                        }, 500);
                    }
                }, 1000);
            }
            
            // Loop do jogo
            function gameLoop() {
                update();
                draw();
                
                if (gameRunning) {
                    animationId = requestAnimationFrame(gameLoop);
                }
            }
            
            // Iniciar jogo
            function startGame() {
                if (gameRunning) return;
                
                gameRunning = true;
                gamePaused = false;
                gameOver.style.display = 'none';
                
                startNewRound();
                gameLoop();
            }
            
            // Pausar/continuar
            function togglePause() {
                gamePaused = !gamePaused;
                pauseBtn.textContent = gamePaused ? 'Continuar (P)' : 'Pausar (P)';
                
                if (!gamePaused && !waitingForRoundStart) {
                    gameLoop();
                }
            }
            
            // Reiniciar jogo
            function resetGame() {
                cancelAnimationFrame(animationId);
                
                player1Score = 0;
                player2Score = 0;
                player1ScoreElement.textContent = '0';
                player2ScoreElement.textContent = '0';
                
                player1Y = canvas.height / 2 - paddleHeight / 2;
                player2Y = canvas.height / 2 - paddleHeight / 2;
                
                ballSpeedMultiplier = 1;
                waitingForRoundStart = false;
                countdownElement.style.display = 'none';
                
                gameRunning = false;
                gamePaused = false;
                pauseBtn.textContent = 'Pausar (P)';
                
                gameOver.style.display = 'none';
                
                draw();
            }
            
            // Verificar fim de jogo
            function checkGameOver() {
                if (player1Score >= winningScore || player2Score >= winningScore) {
                    gameRunning = false;
                    cancelAnimationFrame(animationId);
                    
                    const winner = gameMode === 'vs-ai' 
                        ? (player1Score >= winningScore ? 'Voc√™' : 'IA')
                        : (player1Score >= winningScore ? 'Jogador 1' : 'Jogador 2');
                    
                    winnerElement.textContent = winner;
                    finalScoreElement.textContent = player1Score;
                    finalScore2Element.textContent = player2Score;
                    
                    gameOver.style.display = 'block';
                }
            }
            
            // Reiniciar ap√≥s game over
            function restartGame() {
                resetGame();
                startGame();
            }
            
            // Inicializar
            initGame();
        });
    </script>
</body>
</html>